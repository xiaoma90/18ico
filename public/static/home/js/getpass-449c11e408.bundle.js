webpackJsonp([13],{115:function(e,t){!function(){function e(e){var t=e.attr("src").split("?").shift();e.attr("src",t+"?rd="+_.random(!0))}function t(e){$(".getpass-step").children("li").removeClass("on").eq(e-1).addClass("on"),$(".step-main").children("li").removeClass("on").eq(e-1).addClass("on")}function n(){$.get("/api/getEmail").then(function(e){e.success&&$("#email").val(e.email)}).fail(function(){layer.msg(s[f].error)})}function r(){var r=$("#account"),o=$("#verify"),i=r.val(),a=o.val();return i?a?/^\w{4}$/.test(a)?void $.post("/api/checkAccount",{account:i,code:a}).then(function(r){if(r.success){var o=++u;t(o),n()}else c($("#step_first"),r.error||s[f].error),e($(".refresh-code").children())}).fail(function(){c($("#step_first"),s[f].error)}):(c(o,s[f].verify_format),o.focus().select(),!1):(c(o,s[f].empty_verify),o.focus(),!1):(c(r,s[f].empty_account),r.focus(),!1)}function o(){var e=$("#mail_code"),n=e.val();return n?void $.post("/api/checkCode",{code:n}).then(function(e){e.success?t(++u):c($("#step_second"),e.error||s[f].error)}).fail(function(){c($("#step_second"),s[f].error)}):(c(e,s[f].empty_code),e.focus(),!1)}function i(){var e=$("#new_pwd"),n=$("#repeat_pwd"),r=e.val(),o=n.val();return r?/^[^\u4e00-\u9fa5]{6,32}$/g.test(r)?o?r!==o?(c(n,s[f].different),n.focus().select(),!1):void $.post("/api/savePwd",{pwd:r}).then(function(e){e.success?t(++u):c($("#step_third"),e.error||s[f].error)}).fail(function(){c($("#step_third"),s[f].error)}):(c(n,s[f].confirm_pwd),n.focus(),!1):(c(e,s[f].pwd_format),e.focus().select(),!1):(c(e,s[f].new_pwd),e.focus(),!1)}function c(e,t,n){e.protipShow({icon:"protip icon-info-circled",trigger:"sticky",gravity:"top-left",autoHide:3e3,target:e.parent(),title:t}),"function"==typeof n&&setTimeout(n,2e3)}function a(e,t,n){e.protipShow({icon:!1,trigger:"sticky",gravity:"top-right",scheme:"leaf",arrow:!1,autoHide:2e3,target:e.parent(),title:t}),"function"==typeof n&&setTimeout(n,2e3)}var s={en:{error:"Sorry, there was an unexpected error. Please try again.",frequent:"Your operation is too frequent",check:"The mail sent successfully, please pay attention to timely check.",wait:"Send again wait",second:"second",authentication:"Get authentication code",empty_account:"Please enter the account",empty_verify:"Please enter the authentication code",verify_format:"Verify code format is incorrect. Please check your enter.",empty_code:"Please enter the authentication code",new_pwd:"Please enter the new password",pwd_format:"Passwords must be written in letters (case insensitive), numbers, and underscores!",confirm_pwd:"Please enter the confirm password",different:"Two times the password is not consistent, please check your enter"},"zh-CN":{error:"抱歉，未知错误，请重试",frequent:"亲，您的操作过于频繁哦",check:"邮件发送成功，请注意及时查收哦！",wait:"再次发送等待",second:"秒",authentication:"获取邮箱验证码",empty_account:"账号不能为空哦，请填写",empty_verify:"验证码不能为空哦，请填写",verify_format:"验证码格式有误哦，请检查您的输入",empty_code:"邮箱验证码不能为空哦，请填写",new_pwd:"新登录密码不能为空哦，请填写",pwd_format:"登录密码必须以字母(不区分大小写)、数字、下划线组合！",confirm_pwd:"确认密码不能为空哦，请填写",different:"两次输入的密码不一致哦，请检查您的输入"}},f="",u=1;$(function(){f=$("html").attr("lang")||"zh-CN",$.get("/api/getstep").then(function(e){u=e.step,t(u),2==u&&($(".pull-right").remove(),n())}),$.protip({defaults:{trigger:"sticky"}})}).on("click",".refresh-code",function(){var t=$(this).children();e(t)}).on("click","#getEmailCode",function(){var e=arguments,t=$(this);return e.callee.getting>0?(c(t,s[f].frequent),!1):void $.post("/api/getEmailCode").then(function(n){if(n.success){a(t,s[f].check),e.callee.getting=2;var r=119,o=null,i=$("#getEmailCode");!function(){o=setInterval(function(){r?(i.text(s[f].wait+r+s[f].second),r--):(i.text(s[f].authentication),clearInterval(o),e.callee.getting=0)},1e3)}()}else e.callee.getting=0,c(t,n.error||s[f].error)}).fail(function(){e.callee.getting=0,c(t,s[f].error)})}).on("click","#step_first",function(){r()}).on("click","#step_second",function(){o()}).on("click","#step_third",function(){i()})}()}},[115]);